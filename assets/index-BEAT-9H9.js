import{u as q,r as o,j as e,T as A,H as E,a as R,b as X,c as F,d as G,A as W,e as V,f as Z,g as Q,C as J,O as K,h as H,i as ee}from"./three-B-v83tCI.js";import{u as te}from"./utils-Cr14JYjG.js";import"./vendor-gH-7aFTg.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();function se(){const t=q("./textures/5.png"),i=o.useMemo(()=>({matcap:t}),[t]),r="/PinPaws/fonts/bubbleFont.json";return e.jsxs(e.Fragment,{children:[e.jsxs(A,{font:r,size:.5,height:.1,curveSegments:8,bevelEnabled:!0,bevelThickness:.02,bevelOffset:0,bevelSegments:3,position:[-.2,.5,.15],rotation:[0,-.55,0],anchorX:"center",anchorY:"middle",children:["PinPaws",e.jsx("meshMatcapMaterial",{...i})]}),e.jsxs(A,{font:r,size:.2,height:.05,curveSegments:6,bevelEnabled:!0,bevelThickness:.01,bevelOffset:0,bevelSegments:2,position:[-.5,.2,0],rotation:[0,-.55,0],anchorX:"center",anchorY:"middle",children:["Find your favourite kitty",e.jsx("meshMatcapMaterial",{...i})]})]})}function ne({isVisible:t,text:i="Click me for surprise!",position:r=[0,0,0]}){return!window.matchMedia("(hover: hover)").matches||t?e.jsx(E,{position:r,center:!0,distanceFactor:8,style:{pointerEvents:"none",userSelect:"none"},children:e.jsx("div",{className:"hidden-text-box",children:i})}):null}function _({surpriseLink:t="https://www.youtube.com/watch?v=dQw4w9WgXcQ",hoverText:i="Click me for surprise! ðŸŽ‰",instructionMessage:r="",position:a=[0,-3,0]}){const s=R("/PinPaws/Cat/cat.gltf"),n=X(s.animations,s.scene),[c,l]=o.useState(!1),d=o.useRef(),u=n.actions["05_Jump_LittleFriends"],f=n.actions["06_Greeting_LittleFriends"],m=n.actions["10_Sleep03_LittleFriends"],j=n.actions["07_Eat_LittleFriends"],b=n.actions["04_Run_LittleFriends"],g=r.includes("Are you secretly a cat hater?")?m:r.includes("You seem nice, but you can be better!")?j:r.includes("You are a true cat lover!")?b:f,L=g===m;F((x,M)=>{d.current&&L&&!c&&(d.current.rotation.y+=M*.3)}),o.useEffect(()=>{g&&g!==f?(g.reset().play(),g.setLoop(2201,1/0)):f.reset().play()},[g,f]),o.useEffect(()=>()=>{n&&n.actions&&Object.values(n.actions).forEach(x=>{x&&(x.stop(),x.reset())}),s.scene&&s.scene.traverse(x=>{x.geometry&&x.geometry.dispose(),x.material&&(Array.isArray(x.material)?x.material.forEach(M=>M.dispose()):x.material.dispose())})},[n,s.scene]);const p=()=>{d.current&&L&&(d.current.rotation.y=-.55),u.reset().play(),u.crossFadeFrom(g,.3),l(!0)},w=()=>{g.reset().play(),g.crossFadeFrom(u,.5),g!==f&&g.setLoop(2201,1/0),l(!1)},v=()=>{window.open(t,"_blank","noopener,noreferrer")};return e.jsxs(e.Fragment,{children:[e.jsx("primitive",{ref:d,object:s.scene,scale:3,position:a,rotation:[-.4,-.55,-.2],onPointerEnter:p,onPointerLeave:w,onClick:v,style:{cursor:"pointer"}}),e.jsx(ne,{isVisible:c,text:i,position:[a[0],a[1]-.1,a[2]]})]})}const re=o.memo(({index:t,heartScene:i})=>{const r=o.useRef(),a=o.useMemo(()=>({initialPos:[(Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10],animSpeed:.1+Math.random()*.5,offsetX:Math.random()*Math.PI*2,offsetY:Math.random()*Math.PI*2,offsetZ:Math.random()*Math.PI*2,rotation:[Math.random()*Math.PI,Math.random()*Math.PI,0]}),[]);return F(({clock:s})=>{if(r.current){const n=s.elapsedTime*a.animSpeed;r.current.position.x=a.initialPos[0]+Math.sin(n+a.offsetX)*.5,r.current.position.y=a.initialPos[1]+Math.cos(n+a.offsetY)*.3,r.current.position.z=a.initialPos[2]+Math.sin(n+a.offsetZ)*.4,r.current.rotation.y=n*.2}}),e.jsx("primitive",{ref:r,object:i.clone(),scale:.2,position:a.initialPos,rotation:a.rotation})}),oe=o.memo(function(){const i=R("/PinPaws/Heart/heart.gltf");o.useEffect(()=>()=>{i.scene&&i.scene.traverse(a=>{a.geometry&&a.geometry.dispose(),a.material&&(Array.isArray(a.material)?a.material.forEach(s=>s.dispose()):a.material.dispose())})},[i]);const r=o.useMemo(()=>[...Array(20)].map((a,s)=>e.jsx(re,{index:s,heartScene:i.scene},s)),[i.scene]);return e.jsx(e.Fragment,{children:r})}),O=o.forwardRef(function({startMusic:i=!1,volume:r=.5},a){const{camera:s}=G(),n=o.useRef(null),c=o.useRef(null),l=o.useRef(!1),[d,u]=o.useState(!1);return o.useImperativeHandle(a,()=>({context:c.current?.context,stop:()=>{n.current&&n.current.isPlaying&&n.current.stop()}}),[]),o.useEffect(()=>{if(l.current)return;l.current=!0;const f=new W;c.current=f,s.add(f);const m=new V(f);return n.current=m,new Z().load("./audio/lounge.mp3",b=>{m.setBuffer(b),m.setLoop(!0),m.setVolume(r),u(!0)},b=>{},b=>{}),()=>{n.current&&n.current.isPlaying&&n.current.stop(),c.current&&s&&s.remove(c.current),l.current=!1}},[s,r]),o.useEffect(()=>{i&&d&&n.current&&n.current.buffer&&(n.current.isPlaying&&n.current.stop(),setTimeout(()=>{c.current&&c.current.context&&(console.log("Audio context state:",c.current.context.state),c.current.context.state==="suspended"?c.current.context.resume().then(()=>{n.current.play()}).catch(f=>{}):n.current.play())},100))},[i,d]),null}),$=({text:t,text2:i,link:r,btnText:a,position:s,use3D:n=!1,onButtonClick:c})=>{const l=u=>{u.preventDefault(),c?c():r&&window.open(r,"_blank","noopener,noreferrer")},d=e.jsxs("div",{className:"instructions-box",children:[e.jsx("p",{children:t}),i&&e.jsx("p",{children:i}),e.jsx("button",{onClick:l,className:"btn btn-primary",children:a})]});return n?e.jsx(E,{position:[s[0],s[1],s[2]],center:!0,distanceFactor:5,occlude:!0,style:{pointerEvents:"auto",userSelect:"none"},children:d}):d};function ae({position:t,onPlayClick:i}){return e.jsx(E,{position:t,center:!0,distanceFactor:5,style:{pointerEvents:"auto",userSelect:"none"},children:e.jsx("div",{className:"play-icon",onClick:i,children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",children:[e.jsx("circle",{cx:"40",cy:"40",r:"40",fill:"rgba(255, 255, 255, 0.9)"}),e.jsx("polygon",{points:"32,24 32,56 56,40",fill:"#333"})]})})})}function ie(){const{progress:t}=Q(),[i,r]=o.useState(0);return o.useEffect(()=>{r(t)},[t]),e.jsx(E,{center:!0,children:e.jsxs("div",{style:{color:"black",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[e.jsxs("div",{children:[Math.round(i),"%"]}),e.jsx("div",{style:{fontSize:"1.2rem"},children:"Loading..."})]})})}function ce({onLearnMore:t}){const[i,r]=o.useState(!1),[a,s]=o.useState(!1),n=o.useRef();o.useEffect(()=>()=>{n.current&&(n.current.stop&&n.current.stop(),n.current.context&&n.current.context.close?.())},[]);const c=o.useCallback(()=>{r(!0),s(!0),n.current&&n.current.context&&n.current.context.resume()},[]),l=o.useCallback(()=>{n.current&&n.current.stop&&n.current.stop(),t()},[t]),d=o.useMemo(()=>e.jsx(oe,{}),[]),u=o.useMemo(()=>e.jsx(_,{}),[]),f=o.useMemo(()=>e.jsx(J,{children:e.jsx(se,{})}),[]),m=o.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsx("directionalLight",{position:[1,2,3],intensity:1.5}),e.jsx("ambientLight",{intensity:.5})]}),[]),j=o.useMemo(()=>e.jsx(K,{makeDefault:!0,target:[0,-1.2,0],enableZoom:!1}),[]);return e.jsxs(e.Fragment,{children:[m,j,e.jsx(O,{ref:n,startMusic:a}),e.jsxs(o.Suspense,{fallback:e.jsx(ie,{}),children:[f,u,!i&&e.jsx(ae,{position:[0,-1.1,0],onPlayClick:c}),i&&e.jsx($,{use3D:!0,position:[0,-1.1,0],text:"Hello, I am Abby ðŸ‘‹ðŸ»",text2:"Are you a cat lover? Let's find out!",btnText:"Click to start",onButtonClick:l}),d]})]})}const le=["Luna","Milo","Bella","Oliver","Chloe","Max","Lucy","Charlie","Daisy","Leo","Lily","Simba","Nala","Tiger","Shadow","Whiskers","Mittens","Smokey","Ginger","Felix"],ue=["Loves to play with yarn","Professional napper","Curious about everything","Master of the house","Sunshine personality","Expert bird watcher","Cardboard box enthusiast","Midnight zoomies champion","Treats connoisseur","Window perch guardian","Laser pointer hunter","Catnip addict","Belly rub specialist","Fish toy collector","Sunny spot finder"],I=["#ff6b9d","#4ecdc4","#45b7d1","#f7d794","#e17055","#a29bfe","#fd79a8","#00b894","#e84393","#74b9ff","#fdcb6e","#6c5ce7","#fd79a8","#00cec9","#ff7675"],de=()=>Math.floor(Math.random()*8)+1,fe=t=>I[t%I.length],T=(t,i)=>{const r=t.filter(a=>!i.includes(a));return r.length===0?(i.length=0,t[Math.floor(Math.random()*t.length)]):r[Math.floor(Math.random()*r.length)]},z=(t,i,r,a)=>{const s=T(le,r),n=T(ue,a);return r.push(s),a.push(n),{...t,name:s,bio:n,age:de(),color:fe(i)}},me=t=>typeof t=="string"?t.slice(-10):t.toString(),B=(t,i=400,r=320)=>{const a=me(t);return`https://cataas.com/cat?width=${i}&height=${r}&id=${a}`},he=(t,i)=>({onLoadStart:()=>t(r=>({...r,[i]:!0})),onLoad:()=>t(r=>({...r,[i]:!1})),onError:r=>{t(n=>({...n,[i]:!1}));const a=r.target,s=a.nextSibling?.nextSibling;a&&(a.style.display="none"),s&&(s.style.display="flex")}}),ge=t=>({onLoadStart:()=>t(!0),onLoad:()=>t(!1),onError:i=>{const r=i.target,a=parseInt(r.dataset.retryCount||"0");if(console.warn(`Image failed to load (attempt ${a+1})`),a<5){r.dataset.retryCount=(a+1).toString(),setTimeout(()=>{if(r&&r.src){const n=r.src.split("&_retry=")[0];r.src=`${n}&_retry=${Date.now()}`}},1e3*(a+1));return}t(!1);const s=r.nextSibling;r&&(r.style.display="none",r.style.opacity="0"),s&&(s.style.display="flex",s.style.opacity="1")}});function pe({data:t,index:i,isTop:r,onSwipe:a,onBackgroundChange:s}){const n=o.useRef(),[c,l]=o.useState(!0),[d,u]=o.useState(!1),[f,m]=o.useState(!1),[j,b]=o.useState({x:0,y:0,rotation:0}),k=o.useMemo(()=>ge(p=>{l(p),p||(m(!1),u(!1))}),[]),g=o.useMemo(()=>B(t.id),[t.id]);o.useEffect(()=>{if(c){const p=setTimeout(()=>{c&&m(!0)},5e3);return()=>clearTimeout(p)}},[c]);const L=te(({active:p,movement:[w,v],velocity:[x]})=>{if(!r)return;const M=x>.2||Math.abs(w)>200,N=w<0?-1:1;!p&&M?(s&&(s(N>0?"#ffb6c1":"#2c2c2c"),setTimeout(()=>s("#ffffff"),1e3)),b({x:N*1e3,y:v,rotation:N*15}),setTimeout(()=>a(t.id,N),300)):p&&b({x:w,y:v,rotation:w/10})},{axis:"x"});return e.jsxs("div",{ref:n,...L(),className:`card-container ${r?"grabbable":"not-grabbable"}`,style:{transform:`translate(calc(-50% + ${j.x}px), calc(-50% + ${j.y}px)) rotate(${j.rotation}deg)`,zIndex:1e3-i,transition:r?void 0:"none"},children:[e.jsxs("div",{className:"card-image-container",children:[c&&e.jsx("div",{className:"card-image-loading",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("img",{src:g,alt:t.name,className:"card-image",draggable:!1,loading:"eager","data-retry-count":"0",style:{display:d?"none":"block"},...k,onError:p=>{console.warn("Image failed to load, showing fallback"),u(!0),l(!1),k.onError&&k.onError(p)}}),e.jsxs("div",{className:`card-image-fallback ${d?"show":""}`,children:["ðŸ±",e.jsx("div",{style:{fontSize:"14px",marginTop:"10px",color:"#999"},children:"Photo unavailable"})]})]}),e.jsxs("div",{className:"card-info",children:[e.jsxs("h2",{className:"card-name",style:{color:t.color},children:[t.name,", ",t.age]}),e.jsx("p",{className:"card-bio",children:t.bio}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"card-tags",children:t.tags.slice(0,2).map((p,w)=>e.jsx("span",{className:"card-tag",style:{background:t.color},children:p},w))})]})]})}function xe({rightSwipedCats:t=[]}){const[i,r]=o.useState({}),a=o.useMemo(()=>t.map(s=>{const n=he(r,s.id);return e.jsxs("div",{className:"gallery-item",children:[e.jsxs("div",{className:"gallery-image-container",children:[i[s.id]&&e.jsx("div",{className:"gallery-image-loading",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("img",{src:B(s.id),alt:s.name,className:"gallery-image",...n}),e.jsx("div",{className:"gallery-image-fallback",children:"ðŸ±"})]}),e.jsxs("div",{className:"gallery-info",children:[e.jsx("h3",{style:{color:s.color},children:s.name}),e.jsxs("p",{children:[s.age," years old"]}),e.jsx("p",{className:"gallery-bio",children:s.bio}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"gallery-tags",children:s.tags.slice(0,3).map((c,l)=>e.jsx("span",{className:"gallery-tag",style:{background:s.color},children:c},l))})]})]},s.id)}),[t,i]);return e.jsxs("div",{className:"gallery-container",children:[e.jsxs("div",{className:"gallery-header",children:[e.jsx("h2",{children:"Your Matches"}),e.jsxs("p",{children:["You liked ",t.length," cats, how do you feel?"]})]}),e.jsx("div",{className:"gallery-grid",children:t.length===0?e.jsxs("div",{className:"no-matches",children:[e.jsx("p",{children:"No matches yet!"}),e.jsx("p",{children:"Swipe better on the cats you like next time"})]}):a})]})}function P({bgColor:t="#ffffff"}){const i=()=>{window.open("https://www.linkedin.com/in/wnabihah-dev/","_blank","noopener,noreferrer")},r=t==="#ffb6c1";return e.jsxs("div",{className:"copyright",children:["Developed by"," ",e.jsx("span",{className:`copyright-name ${r?"copyright-name-pink-bg":""}`,onClick:i,children:"W Nurnabihah"})," ","for Netizen Experience"]})}function ye({rightSwipedCats:t=[]}){const i=o.useRef(),[r,a]=o.useState(!1),[s,n]=o.useState(!1),c=()=>{s||(n(!0),console.log("User interaction detected, enabling audio"),a(!0))};o.useEffect(()=>{const u=()=>c();document.addEventListener("click",u);const f=setTimeout(()=>{console.log("Summary mounted, attempting to start music..."),a(!0)},500);return()=>{clearTimeout(f),document.removeEventListener("click",u)}},[]);const l=o.useMemo(()=>{const u=t.length;return u>=8?"You are a true cat lover! ðŸ˜»":u>=4&&u<=7?"You seem nice, but you can be better!":"Are you secretly a cat hater? ðŸ˜¡"},[t.length]),d=()=>{window.location.reload()};return e.jsxs("div",{className:"summary-container",children:[e.jsx("div",{className:"summary-left",children:e.jsxs(H,{shadows:!0,camera:{fov:35,position:[-4,1,6]},children:[e.jsx("directionalLight",{position:[1,2,3],intensity:1.5}),e.jsx("ambientLight",{intensity:.5}),e.jsx(O,{ref:i,startMusic:r,volume:.8}),e.jsx(_,{instructionMessage:l,position:[0,-1,0]}),e.jsx($,{text:l,btnText:"Replay",onButtonClick:d,use3D:!0,position:[0,1.2,0]})]})}),e.jsx("div",{className:"summary-right",children:e.jsx(xe,{rightSwipedCats:t})}),e.jsx(P,{})]})}const je=()=>{const[t,i]=o.useState([]),[r,a]=o.useState(!0),[s,n]=o.useState(null);return o.useEffect(()=>{(async()=>{try{a(!0);const l=await fetch("https://cataas.com/api/cats?limit=10");if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const d=await l.json(),u=[],f=[],m=d.map((j,b)=>z(j,b,u,f));i(m),n(null)}catch(l){console.error("Error fetching cats:",l),n(l.message),i([])}finally{a(!1)}})()},[]),{cats:t,loading:r,error:s,refetch:()=>window.location.reload()}};function be(){const{cats:t,loading:i,error:r}=je(),[a,s]=o.useState([]),[n,c]=o.useState([]),[l,d]=o.useState([]),[u,f]=o.useState([]),[m,j]=o.useState("#ffffff"),[b,k]=o.useState(!1),[g,L]=o.useState(!1),p=o.useRef([]),w=o.useRef([]),v=o.useRef(null);o.useEffect(()=>{const h=()=>{try{v.current=new Audio("./audio/meow.mp3"),v.current.volume=.7,v.current.preload="auto",v.current.load(),L(!0)}catch(S){console.warn("Audio initialization failed:",S)}},y=()=>{h(),document.removeEventListener("touchstart",y),document.removeEventListener("click",y)};return document.addEventListener("touchstart",y,{once:!0}),document.addEventListener("click",y,{once:!0}),()=>{document.removeEventListener("touchstart",y),document.removeEventListener("click",y)}},[]),o.useEffect(()=>{if(t.length>0){p.current=[],w.current=[];const h=t.map((y,S)=>z(y,S,p.current,w.current));s(h),f(h)}},[t]);const x=o.useCallback(()=>{if(!(!g||!v.current))try{v.current.currentTime=0;const h=v.current.play();h!==void 0&&h.catch(y=>{console.warn("Audio play failed:",y);try{const S=new Audio("./audio/meow.mp3");S.volume=.7,S.play().catch(()=>{})}catch{}})}catch(h){console.warn("Error playing meow sound:",h)}},[g]),M=o.useCallback((h,y)=>{const S=a.find(C=>C.id===h);y>0&&S&&(d(C=>[...C,S]),x()),s(C=>C.filter(U=>U.id!==h)),c(C=>[...C,{id:h,direction:y}])},[a,x]),N=o.useCallback(h=>{j(h)},[]),D=o.useCallback(()=>{k(!0)},[]);if(b)return e.jsx(ye,{rightSwipedCats:l});if(i)return e.jsx("div",{className:"match-container",style:{backgroundColor:m},children:e.jsx("div",{className:"loading-message",children:"Loading cats..."})});if(r&&a.length===0)return e.jsx("div",{className:"match-container",style:{backgroundColor:m},children:e.jsxs("div",{className:"error-message",children:[e.jsx("p",{children:"Oops! Having trouble loading cats"}),e.jsx("p",{children:"Please try refreshing the page"})]})});const Y=n.length>=u.length&&u.length>0;return e.jsxs("div",{className:"match-container",style:{backgroundColor:m},children:[a.length>0&&e.jsxs("div",{className:"swipe-instructions",children:[e.jsx("span",{children:"âœ–ï¸"}),e.jsx("span",{style:{margin:"0 5px"},children:"Swipe your kitty"}),e.jsx("span",{children:"â¤ï¸"})]}),a.length>0&&e.jsx("div",{className:"cards-stack",children:a.map((h,y)=>e.jsx(pe,{data:h,index:y,isTop:y===0,onSwipe:M,onBackgroundChange:N},h.id)).reverse()}),Y&&e.jsxs("div",{className:"match-complete",children:[e.jsx("h2",{children:"All cats have been reviewed! ðŸ¾"}),e.jsx("button",{className:"summary-button",onClick:D,children:"View Matches"})]}),e.jsx(P,{bgColor:m})]})}function ve(){const[t,i]=o.useState(!1),r=()=>{i(!0)};return o.useEffect(()=>{if(t){const a=setTimeout(()=>{window.gc&&window.gc()},100);return()=>clearTimeout(a)}},[t]),t?e.jsx(be,{}):e.jsxs(e.Fragment,{children:[e.jsx(H,{shadows:!0,camera:{fov:30,near:.1,far:200,position:[-4,1,6]},children:e.jsx(ce,{onLearnMore:r})}),e.jsx(P,{})]})}const we=ee.createRoot(document.querySelector("#root"));we.render(e.jsx(ve,{}));
//# sourceMappingURL=index-BEAT-9H9.js.map
